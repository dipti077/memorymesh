const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DfUK-mG_.js","assets/vendor-DqEg5H--.js","assets/supabase-CxllErQs.js","assets/router-Di2hKcrj.js","assets/icons-CjHGGmEW.js"])))=>i.map(i=>d[i]);
var Fe=Object.defineProperty,Ue=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var xe=(s,t,r)=>t in s?Fe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,he=(s,t)=>{for(var r in t||(t={}))ze.call(t,r)&&xe(s,r,t[r]);if(ue)for(var r of ue(t))Ge.call(t,r)&&xe(s,r,t[r]);return s},ge=(s,t)=>Ue(s,Re(t));var h=(s,t,r)=>new Promise((a,n)=>{var o=i=>{try{l(r.next(i))}catch(c){n(c)}},d=i=>{try{l(r.throw(i))}catch(c){n(c)}},l=i=>i.done?a(i.value):Promise.resolve(i.value).then(o,d);l((r=r.apply(s,t)).next())});import{r as g,a as He,b as fe}from"./vendor-DqEg5H--.js";import{_ as We,c as Be}from"./supabase-CxllErQs.js";import{u as ie,L as $,B as qe,R as Je,a as C,N as L}from"./router-Di2hKcrj.js";import{M as Ve,H as G,U as ae,S as Ye,L as Ke,X as Ee,C as q,a as Ce,b as K,c as Me,d as X,G as oe,e as le,f as ke,W as Xe,g as Ze,D as Qe,h as et,i as pe,j as tt,E as st,k as rt,A as be,P as at,F as nt,l as it,V as ot}from"./icons-CjHGGmEW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var Le={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt=g,ct=Symbol.for("react.element"),dt=Symbol.for("react.fragment"),mt=Object.prototype.hasOwnProperty,ut=lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xt={key:!0,ref:!0,__self:!0,__source:!0};function $e(s,t,r){var a,n={},o=null,d=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(d=t.ref);for(a in t)mt.call(t,a)&&!xt.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:ct,type:s,key:o,ref:d,props:n,_owner:ut.current}}Z.Fragment=dt;Z.jsx=$e;Z.jsxs=$e;Le.exports=Z;var e=Le.exports,Te,ye=He;Te=ye.createRoot,ye.hydrateRoot;/*! Capacitor: https://capacitorjs.com/ - MIT License */const ht=s=>{const t=new Map;t.set("web",{name:"web"});const r=s.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},a=(o,d)=>{r.platforms.set(o,d)},n=o=>{r.platforms.has(o)&&(r.currentPlatform=r.platforms.get(o))};return r.addPlatform=a,r.setPlatform=n,r},gt=s=>s.CapacitorPlatforms=ht(s),Ie=gt(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});Ie.addPlatform;Ie.setPlatform;var H;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(H||(H={}));class re extends Error{constructor(t,r,a){super(t),this.message=t,this.code=r,this.data=a}}const ft=s=>{var t,r;return s!=null&&s.androidBridge?"android":!((r=(t=s==null?void 0:s.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},pt=s=>{var t,r,a,n,o;const d=s.CapacitorCustomPlatform||null,l=s.Capacitor||{},i=l.Plugins=l.Plugins||{},c=s.CapacitorPlatforms,m=()=>d!==null?d.name:ft(s),x=((t=c==null?void 0:c.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||m,p=()=>x()!=="web",P=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,w=u=>{const f=W.get(u);return!!(f!=null&&f.platforms.has(x())||S(u))},v=((a=c==null?void 0:c.currentPlatform)===null||a===void 0?void 0:a.isPluginAvailable)||w,M=u=>{var f;return(f=l.PluginHeaders)===null||f===void 0?void 0:f.find(R=>R.name===u)},S=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.getPluginHeader)||M,T=u=>s.console.error(u),U=(u,f,R)=>Promise.reject(`${R} does not have an implementation of "${f}".`),W=new Map,ee=(u,f={})=>{const R=W.get(u);if(R)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),R.proxy;const _=x(),z=S(u);let k;const Oe=()=>h(void 0,null,function*(){return!k&&_ in f?k=typeof f[_]=="function"?k=yield f[_]():k=f[_]:d!==null&&!k&&"web"in f&&(k=typeof f.web=="function"?k=yield f.web():k=f.web),k}),De=(b,y)=>{var E,I;if(z){const A=z==null?void 0:z.methods.find(N=>y===N.name);if(A)return A.rtype==="promise"?N=>l.nativePromise(u,y.toString(),N):(N,V)=>l.nativeCallback(u,y.toString(),N,V);if(b)return(E=b[y])===null||E===void 0?void 0:E.bind(b)}else{if(b)return(I=b[y])===null||I===void 0?void 0:I.bind(b);throw new re(`"${u}" plugin is not implemented on ${_}`,H.Unimplemented)}},te=b=>{let y;const E=(...I)=>{const A=Oe().then(N=>{const V=De(N,b);if(V){const Y=V(...I);return y=Y==null?void 0:Y.remove,Y}else throw new re(`"${u}.${b}()" is not implemented on ${_}`,H.Unimplemented)});return b==="addListener"&&(A.remove=()=>h(void 0,null,function*(){return y()})),A};return E.toString=()=>`${b.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:b,writable:!1,configurable:!1}),E},de=te("addListener"),me=te("removeListener"),_e=(b,y)=>{const E=de({eventName:b},y),I=()=>h(void 0,null,function*(){const N=yield E;me({eventName:b,callbackId:N},y)}),A=new Promise(N=>E.then(()=>N({remove:I})));return A.remove=()=>h(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield I()}),A},se=new Proxy({},{get(b,y){switch(y){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return z?_e:de;case"removeListener":return me;default:return te(y)}}});return i[u]=se,W.set(u,{name:u,proxy:se,platforms:new Set([...Object.keys(f),...z?[_]:[]])}),se},j=((o=c==null?void 0:c.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||ee;return l.convertFileSrc||(l.convertFileSrc=u=>u),l.getPlatform=x,l.handleError=T,l.isNativePlatform=P,l.isPluginAvailable=v,l.pluginMethodNoop=U,l.registerPlugin=j,l.Exception=re,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},bt=s=>s.Capacitor=pt(s),J=bt(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),Q=J.registerPlugin;J.Plugins;class Ae{constructor(t){this.listeners={},this.retainedEventArguments={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,r){let a=!1;this.listeners[t]||(this.listeners[t]=[],a=!0),this.listeners[t].push(r);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o),a&&this.sendRetainedArgumentsForEvent(t);const d=()=>h(this,null,function*(){return this.removeListener(t,r)});return Promise.resolve({remove:d})}removeAllListeners(){return h(this,null,function*(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}})}notifyListeners(t,r,a){const n=this.listeners[t];if(!n){if(a){let o=this.retainedEventArguments[t];o||(o=[]),o.push(r),this.retainedEventArguments[t]=o}return}n.forEach(o=>o(r))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:a=>{this.notifyListeners(r,a)}}}unimplemented(t="not implemented"){return new J.Exception(t,H.Unimplemented)}unavailable(t="not available"){return new J.Exception(t,H.Unavailable)}removeListener(t,r){return h(this,null,function*(){const a=this.listeners[t];if(!a)return;const n=a.indexOf(r);this.listeners[t].splice(n,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])})}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(a=>{this.notifyListeners(t,a)}))}}const ve=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),je=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class yt extends Ae{getCookies(){return h(this,null,function*(){const t=document.cookie,r={};return t.split(";").forEach(a=>{if(a.length<=0)return;let[n,o]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=je(n).trim(),o=je(o).trim(),r[n]=o}),r})}setCookie(t){return h(this,null,function*(){try{const r=ve(t.key),a=ve(t.value),n=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),d=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${a||""}${n}; path=${o}; ${d};`}catch(r){return Promise.reject(r)}})}deleteCookie(t){return h(this,null,function*(){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}})}clearCookies(){return h(this,null,function*(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}})}clearAllCookies(){return h(this,null,function*(){try{yield this.clearCookies()}catch(t){return Promise.reject(t)}})}}Q("CapacitorCookies",{web:()=>new yt});const vt=s=>h(void 0,null,function*(){return new Promise((t,r)=>{const a=new FileReader;a.onload=()=>{const n=a.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},a.onerror=n=>r(n),a.readAsDataURL(s)})}),jt=(s={})=>{const t=Object.keys(s);return Object.keys(s).map(n=>n.toLocaleLowerCase()).reduce((n,o,d)=>(n[o]=s[t[d]],n),{})},wt=(s,t=!0)=>s?Object.entries(s).reduce((a,n)=>{const[o,d]=n;let l,i;return Array.isArray(d)?(i="",d.forEach(c=>{l=t?encodeURIComponent(c):c,i+=`${o}=${l}&`}),i.slice(0,-1)):(l=t?encodeURIComponent(d):d,i=`${o}=${l}`),`${a}&${i}`},"").substr(1):null,Nt=(s,t={})=>{const r=Object.assign({method:s.method||"GET",headers:s.headers},t),n=jt(s.headers)["content-type"]||"";if(typeof s.data=="string")r.body=s.data;else if(n.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[d,l]of Object.entries(s.data||{}))o.set(d,l);r.body=o.toString()}else if(n.includes("multipart/form-data")||s.data instanceof FormData){const o=new FormData;if(s.data instanceof FormData)s.data.forEach((l,i)=>{o.append(i,l)});else for(const l of Object.keys(s.data))o.append(l,s.data[l]);r.body=o;const d=new Headers(r.headers);d.delete("content-type"),r.headers=d}else(n.includes("application/json")||typeof s.data=="object")&&(r.body=JSON.stringify(s.data));return r};class Pt extends Ae{request(t){return h(this,null,function*(){const r=Nt(t,t.webFetchExtra),a=wt(t.params,t.shouldEncodeUrlParams),n=a?`${t.url}?${a}`:t.url,o=yield fetch(n,r),d=o.headers.get("content-type")||"";let{responseType:l="text"}=o.ok?t:{};d.includes("application/json")&&(l="json");let i,c;switch(l){case"arraybuffer":case"blob":c=yield o.blob(),i=yield vt(c);break;case"json":i=yield o.json();break;case"document":case"text":default:i=yield o.text()}const m={};return o.headers.forEach((x,p)=>{m[p]=x}),{data:i,headers:m,status:o.status,url:o.url}})}get(t){return h(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))})}post(t){return h(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))})}put(t){return h(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))})}patch(t){return h(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))})}delete(t){return h(this,null,function*(){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))})}}Q("CapacitorHttp",{web:()=>new Pt});const St=Q("SplashScreen",{web:()=>We(()=>import("./web-DfUK-mG_.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>new s.SplashScreenWeb)});var ne;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(ne||(ne={}));var we;(function(s){s.None="NONE",s.Slide="SLIDE",s.Fade="FADE"})(we||(we={}));const Ne=Q("StatusBar"),Et="https://zfcxwbhgdvtfofqltvek.supabase.co",Ct="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpmY3h3YmhnZHZ0Zm9mcWx0dmVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA5NjA5MDcsImV4cCI6MjA2NjUzNjkwN30.G5_RSOVz01OeX8yVrWz5hLDW0reHF6loPth9mgvuh2k",O=Be(Et,Ct);function ce(){const[s,t]=g.useState(null),[r,a]=g.useState(!0);return g.useEffect(()=>{O.auth.getSession().then(({data:{session:c}})=>{var m;t((m=c==null?void 0:c.user)!=null?m:null),a(!1)});const{data:{subscription:i}}=O.auth.onAuthStateChange((c,m)=>{var x;t((x=m==null?void 0:m.user)!=null?x:null),a(!1)});return()=>i.unsubscribe()},[]),{user:s,loading:r,signIn:(i,c)=>h(this,null,function*(){const{data:m,error:x}=yield O.auth.signInWithPassword({email:i,password:c});return{data:m,error:x}}),signUp:(i,c,m)=>h(this,null,function*(){const{data:x,error:p}=yield O.auth.signUp({email:i,password:c,options:{data:{full_name:m}}});return{data:x,error:p}}),signOut:()=>h(this,null,function*(){const{error:i}=yield O.auth.signOut();return{error:i}}),resetPassword:i=>h(this,null,function*(){const{data:c,error:m}=yield O.auth.resetPasswordForEmail(i);return{data:c,error:m}})}}function Mt({onMenuToggle:s}){var o;const{user:t,signOut:r}=ce(),a=ie(),n=()=>h(this,null,function*(){yield r()});return e.jsx("header",{className:"bg-white shadow-md border-b-2 border-sage-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:s,className:"p-2 rounded-md text-sage-600 hover:text-sage-700 hover:bg-sage-50 focus:outline-none focus:ring-2 focus:ring-sage-500 lg:hidden","aria-label":"Toggle menu",children:e.jsx(Ve,{size:24})}),e.jsxs($,{to:"/",className:"flex items-center space-x-2 ml-2 lg:ml-0",children:[e.jsx("div",{className:"bg-sage-700 p-2 rounded-lg",children:e.jsx(G,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold text-sage-800",children:"MemoryMesh"})]})]}),t&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-2 text-sage-600",children:[e.jsx(ae,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:((o=t.user_metadata)==null?void 0:o.full_name)||t.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{to:"/settings",className:`p-2 rounded-md transition-colors ${a.pathname==="/settings"?"bg-sage-100 text-sage-700":"text-sage-600 hover:text-sage-700 hover:bg-sage-50"} focus:outline-none focus:ring-2 focus:ring-sage-500`,"aria-label":"Settings",children:e.jsx(Ye,{size:20})}),e.jsx("button",{onClick:n,className:"p-2 rounded-md text-sage-600 hover:text-sage-700 hover:bg-sage-50 focus:outline-none focus:ring-2 focus:ring-sage-500","aria-label":"Sign out",children:e.jsx(Ke,{size:20})})]})]})]})})})}function kt({isOpen:s,onClose:t}){const r=ie(),a=[{name:"Dashboard",href:"/dashboard",icon:Ce},{name:"Memory Timeline",href:"/timeline",icon:K},{name:"Upload Memory",href:"/upload",icon:Me},{name:"Family Members",href:"/family",icon:X},{name:"Memory Games",href:"/games",icon:oe},{name:"Search Memories",href:"/search",icon:le}];return e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:t}),e.jsx("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-sage-50 border-r border-sage-200 transform transition-transform duration-300 ease-in-out
        lg:translate-x-0 lg:static lg:inset-0
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-sage-200 lg:hidden",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"bg-sage-700 p-2 rounded-lg",children:e.jsx(G,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-lg font-bold text-sage-800",children:"MemoryMesh"})]}),e.jsx("button",{onClick:t,className:"p-2 rounded-md text-sage-600 hover:text-sage-700 hover:bg-sage-100","aria-label":"Close menu",children:e.jsx(Ee,{size:20})})]}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:a.map(n=>{const o=r.pathname===n.href;return e.jsx("li",{children:e.jsxs($,{to:n.href,onClick:t,className:`
                        flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors
                        ${o?"bg-sage-200 text-sage-800 font-medium":"text-sage-600 hover:bg-sage-100 hover:text-sage-700"}
                        focus:outline-none focus:ring-2 focus:ring-sage-500
                      `,children:[e.jsx(n.icon,{size:20}),e.jsx("span",{className:"text-base",children:n.name})]})},n.name)})})}),e.jsx("div",{className:"p-4 border-t border-sage-200",children:e.jsxs("div",{className:"bg-sage-100 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(q,{className:"w-5 h-5 text-sage-600"}),e.jsx("span",{className:"text-sm font-medium text-sage-800",children:"Preserve Memories"})]}),e.jsx("p",{className:"text-xs text-sage-600",children:"Keep your family stories alive and accessible for generations to come."})]})})]})})]})}function D(){const[s,t]=g.useState({isMobile:!1,isTablet:!1,isDesktop:!0,isTouchDevice:!1,platform:"web",orientation:"portrait"});return g.useEffect(()=>{const r=()=>{const a=navigator.userAgent,n=window.innerWidth,o=window.innerHeight,d=n<=768,l=n>768&&n<=1024,i=n>1024,c="ontouchstart"in window||navigator.maxTouchPoints>0;let m="web";/iPad|iPhone|iPod/.test(a)?m="ios":/Android/.test(a)&&(m="android");const x=o>n?"portrait":"landscape";t({isMobile:d,isTablet:l,isDesktop:i,isTouchDevice:c,platform:m,orientation:x})};return r(),window.addEventListener("resize",r),window.addEventListener("orientationchange",r),()=>{window.removeEventListener("resize",r),window.removeEventListener("orientationchange",r)}},[]),s}function Lt(){const{isMobile:s}=D(),t=ie();if(!s)return null;const r=[{name:"Home",href:"/dashboard",icon:Ce},{name:"Timeline",href:"/timeline",icon:K},{name:"Upload",href:"/upload",icon:Me},{name:"Family",href:"/family",icon:X},{name:"Search",href:"/search",icon:le}];return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-sage-200 z-50 safe-area-inset-bottom",children:e.jsx("div",{className:"flex justify-around items-center py-2",children:r.map(a=>{const n=t.pathname===a.href;return e.jsxs($,{to:a.href,className:`
                flex flex-col items-center justify-center p-2 min-w-0 flex-1
                ${n?"text-sage-700":"text-gray-500 hover:text-sage-600"}
                transition-colors duration-200
              `,children:[e.jsx(a.icon,{size:20,className:"mb-1"}),e.jsx("span",{className:"text-xs font-medium truncate",children:a.name})]},a.name)})})})}function $t(){const[s,t]=g.useState(navigator.onLine),[r,a]=g.useState([]);g.useEffect(()=>{const i=()=>{t(!0),l()},c=()=>{t(!1)};return window.addEventListener("online",i),window.addEventListener("offline",c),n(),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",c)}},[]);const n=()=>{try{const i=localStorage.getItem("memorymesh_pending_sync");i&&a(JSON.parse(i))}catch(i){console.error("Error loading pending sync data:",i)}},o=i=>{try{localStorage.setItem("memorymesh_pending_sync",JSON.stringify(i)),a(i)}catch(c){console.error("Error saving pending sync data:",c)}},d=(i,c)=>{const m={id:crypto.randomUUID(),type:i,data:c,timestamp:Date.now()},x=[...r,m];o(x),s&&l()},l=()=>h(this,null,function*(){if(!s||r.length===0)return;const i=[];for(const m of r)try{m.type==="memory"?yield O.from("memories").insert(m.data):m.type==="family_member"&&(yield O.from("family_members").insert(m.data)),i.push(m.id)}catch(x){console.error(`Failed to sync ${m.type}:`,x)}const c=r.filter(m=>!i.includes(m.id));o(c)});return{isOnline:s,pendingSync:r.length,addToSyncQueue:d,syncPendingData:l}}function Tt(){const{isOnline:s,pendingSync:t}=$t();return s&&t===0?null:e.jsx("div",{className:`
      fixed top-4 right-4 z-50 px-3 py-2 rounded-lg shadow-lg text-sm font-medium
      ${s?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}
    `,children:e.jsx("div",{className:"flex items-center space-x-2",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ke,{size:16}),e.jsxs("span",{children:["Syncing ",t," items..."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xe,{size:16}),e.jsxs("span",{children:["Offline - ",t," pending"]})]})})})}function It(){const[s,t]=g.useState(null),[r,a]=g.useState(!1),[n,o]=g.useState(!1),{isMobile:d,platform:l}=D();g.useEffect(()=>{(()=>{if(window.matchMedia("(display-mode: standalone)").matches){o(!0);return}if(window.navigator.standalone===!0){o(!0);return}})();const x=P=>{P.preventDefault(),t(P),setTimeout(()=>{n||a(!0)},1e4)},p=()=>{o(!0),a(!1),t(null)};return window.addEventListener("beforeinstallprompt",x),window.addEventListener("appinstalled",p),()=>{window.removeEventListener("beforeinstallprompt",x),window.removeEventListener("appinstalled",p)}},[n]);const i=()=>h(this,null,function*(){if(!s){l==="android"?alert(`To install MemoryMesh:
1. Tap the menu button (⋮) in your browser
2. Select "Add to Home screen" or "Install app"`):l==="ios"&&alert(`To install MemoryMesh:
1. Tap the Share button (□↗)
2. Select "Add to Home Screen"`),a(!1);return}try{yield s.prompt();const{outcome:m}=yield s.userChoice;m==="accepted"&&o(!0),t(null),a(!1)}catch(m){console.error("Error during installation:",m),a(!1)}}),c=()=>{a(!1),sessionStorage.setItem("installPromptDismissed","true")};return n||!r||sessionStorage.getItem("installPromptDismissed")||!d?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 mx-auto max-w-sm",children:e.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-sage-200 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-sage-700 p-2 rounded-lg flex-shrink-0",children:e.jsx(Ze,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Install MemoryMesh"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Add to your home screen for quick access to your family memories"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:i,className:"flex items-center space-x-1 bg-sage-700 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:bg-sage-800 transition-colors",children:[e.jsx(Qe,{size:14}),e.jsx("span",{children:"Install"})]}),e.jsx("button",{onClick:c,className:"px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-gray-800 transition-colors",children:"Not now"})]})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 flex-shrink-0",children:e.jsx(Ee,{size:16})})]})})})}function F({children:s}){const[t,r]=g.useState(!1),{isMobile:a}=D();return e.jsxs("div",{className:"min-h-screen bg-sage-50",children:[e.jsx(Tt,{}),e.jsx(It,{}),e.jsx(Mt,{onMenuToggle:()=>r(!0)}),e.jsxs("div",{className:"flex",children:[e.jsx(kt,{isOpen:t,onClose:()=>r(!1)}),e.jsx("main",{className:"flex-1 lg:ml-0",children:e.jsx("div",{className:`p-4 sm:p-6 lg:p-8 ${a?"pb-20":""}`,children:s})})]}),e.jsx(Lt,{})]})}function At(){const s=[{icon:q,title:"Preserve Memories",description:"Upload photos, videos, and audio recordings to create a rich family history."},{icon:X,title:"Family Collaboration",description:"Invite family members to contribute and share memories together."},{icon:le,title:"AI Organization",description:"Smart tagging and search makes finding memories effortless."},{icon:oe,title:"Memory Games",description:"Engaging activities to help with memory recall and cognitive wellness."},{icon:et,title:"Privacy First",description:"Your memories are secure with advanced privacy controls."}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sage-50 to-sage-100",children:[e.jsx("div",{className:"relative overflow-hidden",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-sage-700 rounded-full mb-6",children:e.jsx(G,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl sm:text-6xl font-bold text-sage-800 mb-6",children:"MemoryMesh"}),e.jsx("p",{className:"text-xl sm:text-2xl text-sage-600 mb-8 max-w-3xl mx-auto",children:"Preserve, organize, and share your family's precious memories. A collaborative platform designed with love for families dealing with memory challenges."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[e.jsx($,{to:"/auth",className:"w-full sm:w-auto bg-sage-700 text-white px-8 py-4 rounded-xl font-medium text-lg hover:bg-sage-800 transition-colors focus:outline-none focus:ring-2 focus:ring-sage-500 focus:ring-offset-2",children:"Get Started Free"}),e.jsx($,{to:"/demo",className:"w-full sm:w-auto border-2 border-sage-700 text-sage-700 px-8 py-4 rounded-xl font-medium text-lg hover:bg-sage-700 hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-sage-500 focus:ring-offset-2",children:"View Demo"})]})]})})}),e.jsx("div",{className:"py-16 sm:py-24 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need to Preserve Family Memories"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Built specifically for families, with accessibility and ease of use at the forefront."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((t,r)=>e.jsxs("div",{className:"bg-sage-50 rounded-2xl p-8 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"bg-sage-700 w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:e.jsx(t.icon,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:t.title}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description})]},r))})]})}),e.jsx("div",{className:"py-16 sm:py-24 bg-sage-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-6",children:"Start Preserving Your Family Memories Today"}),e.jsx("p",{className:"text-xl text-sage-100 mb-8",children:"Join families around the world who are keeping their stories alive with MemoryMesh."}),e.jsx($,{to:"/auth",className:"inline-block bg-white text-sage-700 px-8 py-4 rounded-xl font-medium text-lg hover:bg-sage-50 transition-colors focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-sage-700",children:"Create Your Family's Memory Collection"})]})}),e.jsx("footer",{className:"bg-sage-800 text-sage-100 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4 md:mb-0",children:[e.jsx(G,{className:"w-6 h-6"}),e.jsx("span",{className:"text-xl font-bold",children:"MemoryMesh"})]}),e.jsx("p",{className:"text-sage-300 text-center md:text-right",children:"© 2025 MemoryMesh. Built with love for families everywhere."})]})})})]})}function Ot({mode:s,onToggleMode:t}){const[r,a]=g.useState(""),[n,o]=g.useState(""),[d,l]=g.useState(""),[i,c]=g.useState(!1),[m,x]=g.useState(!1),[p,P]=g.useState(""),[w,v]=g.useState("error"),{signIn:M,signUp:S}=ce(),T=j=>{const u=j.toLowerCase();return u.includes("invalid login credentials")||u.includes("invalid_credentials")?{type:"error",title:"Invalid Credentials",message:"The email or password you entered is incorrect. Please double-check your credentials and try again.",icon:be}:u.includes("email not confirmed")||u.includes("email_not_confirmed")?{type:"warning",title:"Email Not Verified",message:"Please check your email inbox (including spam folder) and click the verification link to confirm your account before signing in.",icon:pe}:u.includes("over_email_send_rate_limit")||u.includes("rate limit")?{type:"info",title:"Rate Limit Reached",message:"Too many requests have been made. Please wait 48 seconds before trying again for security purposes.",icon:ke}:u.includes("user already registered")||u.includes("already registered")?{type:"info",title:"Account Already Exists",message:"An account with this email already exists. Try signing in instead, or use a different email address.",icon:ae}:{type:"error",title:"Authentication Error",message:j,icon:be}},U=j=>h(this,null,function*(){j.preventDefault(),x(!0),P("");try{if(s==="signin"){const{error:u}=yield M(r,n);if(u)throw u}else{const{error:u}=yield S(r,n,d);if(u)throw u;v("info"),P("Account created successfully! Please check your email to verify your account before signing in.");return}}catch(u){const f=T(u.message);v(f.type),P(f.message)}finally{x(!1)}}),W=()=>{switch(w){case"warning":return"bg-amber-50 border-amber-200 text-amber-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-red-50 border-red-200 text-red-700"}},ee=()=>{const u=T(p).icon;switch(w){case"warning":return e.jsx(u,{className:"w-5 h-5 text-amber-600 flex-shrink-0"});case"info":return e.jsx(u,{className:"w-5 h-5 text-blue-600 flex-shrink-0"});default:return e.jsx(u,{className:"w-5 h-5 text-red-600 flex-shrink-0"})}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-sage-50 to-sage-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-sage-700 rounded-full mb-4",children:e.jsx(G,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-sage-800",children:"MemoryMesh"}),e.jsx("p",{className:"text-sage-600 mt-2",children:"Preserve & Share Family Memories"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:s==="signin"?"Welcome Back":"Create Account"}),e.jsx("p",{className:"text-gray-600",children:s==="signin"?"Sign in to access your family memories":"Join your family in preserving memories"})]}),p&&e.jsx("div",{className:`mb-4 p-4 border rounded-lg ${W()}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[ee(),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:T(p).title}),e.jsx("p",{className:"text-sm mt-1",children:p}),w==="warning"&&p.includes("email")&&e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"Didn't receive the email? Check your spam folder or contact support."}),w==="info"&&p.includes("rate limit")&&e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"This security measure helps protect against automated attacks."})]})]})}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[s==="signup"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"fullName",type:"text",required:!0,value:d,onChange:j=>l(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sage-500 focus:border-sage-500 text-base",placeholder:"Enter your full name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",required:!0,value:r,onChange:j=>a(j.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sage-500 focus:border-sage-500 text-base",placeholder:"Enter your email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(tt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:i?"text":"password",required:!0,value:n,onChange:j=>o(j.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sage-500 focus:border-sage-500 text-base",placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:i?e.jsx(st,{size:20}):e.jsx(rt,{size:20})})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-sage-700 text-white py-3 px-4 rounded-lg font-medium hover:bg-sage-800 focus:outline-none focus:ring-2 focus:ring-sage-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Please wait...":s==="signin"?"Sign In":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:t,className:"text-sage-600 hover:text-sage-700 font-medium",children:s==="signin"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}function Dt(){const[s,t]=g.useState("signin");return e.jsx(Ot,{mode:s,onToggleMode:()=>t(s==="signin"?"signup":"signin")})}function Pe({children:s,className:t="",minItemWidth:r=280,gap:a=24}){const{isMobile:n,isTablet:o}=D(),d=()=>n?"grid-cols-1":o?"grid-cols-2":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",l=()=>n?"gap-4":o?"gap-6":"gap-8";return e.jsx("div",{className:`
        grid ${d()} ${l()}
        ${t}
      `,style:{gridTemplateColumns:n?"1fr":`repeat(auto-fill, minmax(${r}px, 1fr))`},children:s})}function B({children:s,className:t="",onTap:r,onLongPress:a,disabled:n=!1}){const{isTouchDevice:o}=D(),[d,l]=fe.useState(!1),i=fe.useRef(),p=o?{onTouchStart:()=>{n||(l(!0),a&&(i.current=setTimeout(()=>{a(),l(!1)},500)))},onTouchEnd:()=>{n||(l(!1),i.current&&clearTimeout(i.current),r&&r())},onTouchCancel:()=>{l(!1),i.current&&clearTimeout(i.current)}}:{onClick:r};return e.jsx("div",ge(he({className:`
        ${t}
        ${o?"touch-manipulation":""}
        ${d?"scale-95 opacity-80":""}
        ${n?"opacity-50 pointer-events-none":""}
        transition-all duration-150 ease-out
        select-none
      `},p),{children:s}))}function _t(){const{isMobile:s}=D(),t=[{title:"Upload Memory",description:"Add a new photo, video, or story",icon:at,href:"/upload",color:"bg-sage-700 hover:bg-sage-800"},{title:"View Timeline",description:"Browse all family memories",icon:K,href:"/timeline",color:"bg-blue-600 hover:bg-blue-700"},{title:"Memory Games",description:"Play cognitive wellness games",icon:oe,href:"/games",color:"bg-purple-600 hover:bg-purple-700"},{title:"Family Members",description:"Manage family access",icon:X,href:"/family",color:"bg-green-600 hover:bg-green-700"}],r=[{id:1,title:"Family Reunion 2024",type:"photo",date:"2024-12-15",thumbnail:"https://images.pexels.com/photos/1128318/pexels-photo-1128318.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:2,title:"Grandma's Birthday Story",type:"audio",date:"2024-12-10",thumbnail:null},{id:3,title:"Christmas Morning",type:"video",date:"2024-12-25",thumbnail:"https://images.pexels.com/photos/1303081/pexels-photo-1303081.jpeg?auto=compress&cs=tinysrgb&w=400"}];return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-sage-700 to-sage-600 rounded-2xl p-6 sm:p-8 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(G,{className:`${s?"w-6 h-6":"w-8 h-8"}`}),e.jsx("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold`,children:"Welcome to MemoryMesh"})]}),e.jsx("p",{className:`text-sage-100 ${s?"text-base":"text-lg"}`,children:"Your family's memories are safe and beautifully organized. Start by uploading a new memory or exploring what your family has shared."})]})}),e.jsxs("div",{className:"mb-12",children:[e.jsx("h2",{className:`${s?"text-xl":"text-2xl"} font-bold text-gray-900 mb-6`,children:"Quick Actions"}),e.jsx(Pe,{minItemWidth:s?150:280,children:t.map((a,n)=>e.jsx(B,{children:e.jsxs($,{to:a.href,className:`${a.color} text-white p-4 sm:p-6 rounded-xl hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1 block`,children:[e.jsx(a.icon,{className:`${s?"w-6 h-6":"w-8 h-8"} mb-3 sm:mb-4`}),e.jsx("h3",{className:`${s?"text-base":"text-lg"} font-semibold mb-2`,children:a.title}),e.jsx("p",{className:`${s?"text-xs":"text-sm"} opacity-90`,children:a.description})]})},n))})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:`${s?"text-xl":"text-2xl"} font-bold text-gray-900`,children:"Recent Memories"}),e.jsx($,{to:"/timeline",className:"text-sage-600 hover:text-sage-700 font-medium",children:"View All →"})]}),e.jsx(Pe,{children:r.map(a=>e.jsx(B,{children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:`${s?"aspect-square":"aspect-video"} bg-gray-100 relative`,children:[a.thumbnail?e.jsx("img",{src:a.thumbnail,alt:a.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(q,{className:`${s?"w-8 h-8":"w-12 h-12"} text-gray-400`})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:a.type})]}),e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsx("h3",{className:`font-semibold text-gray-900 mb-1 ${s?"text-sm":"text-base"}`,children:a.title}),e.jsx("p",{className:`text-gray-500 ${s?"text-xs":"text-sm"}`,children:a.date})]})]})},a.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sm:p-8",children:[e.jsx("h2",{className:`${s?"text-xl":"text-2xl"} font-bold text-gray-900 mb-6`,children:"Family Overview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 sm:gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`${s?"text-2xl":"text-3xl"} font-bold text-sage-700 mb-2`,children:"47"}),e.jsx("div",{className:`text-gray-600 ${s?"text-xs":"text-sm"}`,children:"Total Memories"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`${s?"text-2xl":"text-3xl"} font-bold text-sage-700 mb-2`,children:"5"}),e.jsx("div",{className:`text-gray-600 ${s?"text-xs":"text-sm"}`,children:"Family Members"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`${s?"text-2xl":"text-3xl"} font-bold text-sage-700 mb-2`,children:"12"}),e.jsx("div",{className:`text-gray-600 ${s?"text-xs":"text-sm"}`,children:"Games Played"})]})]})]})]})}function Se({children:s,onSwipeLeft:t,onSwipeRight:r,onSwipeUp:a,onSwipeDown:n,threshold:o=50,className:d=""}){const{isTouchDevice:l}=D(),i=g.useRef(null),[c,m]=g.useState(!1);if(!l)return e.jsx("div",{className:d,children:s});const x=w=>{const v=w.touches[0];i.current={x:v.clientX,y:v.clientY},m(!1)},p=w=>{if(!i.current)return;const v=w.touches[0],M=Math.abs(v.clientX-i.current.x),S=Math.abs(v.clientY-i.current.y);(M>10||S>10)&&m(!0)},P=w=>{if(!i.current||!c){i.current=null,m(!1);return}const v=w.changedTouches[0],M=v.clientX-i.current.x,S=v.clientY-i.current.y,T=Math.abs(M),U=Math.abs(S);T>U&&T>o?M>0&&r?r():M<0&&t&&t():U>o&&(S>0&&n?n():S<0&&a&&a()),i.current=null,m(!1)};return e.jsx("div",{className:`${d} touch-pan-y`,onTouchStart:x,onTouchMove:p,onTouchEnd:P,children:s})}function Ft(){const{isMobile:s}=D(),[t,r]=g.useState("all"),a=[{id:1,title:"Christmas Morning 2024",type:"video",date:"2024-12-25",description:"The kids opening presents and the joy on their faces.",thumbnail:"https://images.pexels.com/photos/1303081/pexels-photo-1303081.jpeg?auto=compress&cs=tinysrgb&w=400",author:"Mom",tags:["Christmas","Family","Kids"]},{id:2,title:"Family Reunion Group Photo",type:"photo",date:"2024-12-15",description:"All the cousins together for the first time in years.",thumbnail:"https://images.pexels.com/photos/1128318/pexels-photo-1128318.jpeg?auto=compress&cs=tinysrgb&w=400",author:"Uncle John",tags:["Reunion","Extended Family"]},{id:3,title:"Grandma's Birthday Story",type:"audio",date:"2024-12-10",description:"Grandma sharing her favorite childhood memory.",thumbnail:null,author:"Sarah",tags:["Grandma","Stories","Birthday"]},{id:4,title:"Dad's Army Days",type:"story",date:"2024-12-05",description:"Stories from Dad's time in the service, written down by the family.",thumbnail:null,author:"Family",tags:["Dad","Military","History"]}],n=[{id:"all",label:"All Memories"},{id:"photo",label:"Photos"},{id:"video",label:"Videos"},{id:"audio",label:"Audio"},{id:"story",label:"Stories"}],o=i=>{switch(i){case"photo":return q;case"video":return ot;case"audio":return it;case"story":return nt;default:return q}},d=i=>{switch(i){case"photo":return"bg-blue-100 text-blue-700";case"video":return"bg-purple-100 text-purple-700";case"audio":return"bg-green-100 text-green-700";case"story":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},l=t==="all"?a:a.filter(i=>i.type===t);return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(K,{className:`${s?"w-6 h-6":"w-8 h-8"} text-sage-700`}),e.jsx("h1",{className:`${s?"text-2xl":"text-3xl"} font-bold text-gray-900`,children:"Memory Timeline"})]}),e.jsx("p",{className:`${s?"text-base":"text-lg"} text-gray-600`,children:"Journey through your family's precious memories, organized by date."})]}),e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsx(Se,{className:"flex gap-2 overflow-x-auto pb-2",children:n.map(i=>e.jsx(B,{onTap:()=>r(i.id),children:e.jsx("button",{className:`
                  px-3 sm:px-4 py-2 rounded-lg font-medium whitespace-nowrap text-sm sm:text-base
                  ${t===i.id?"bg-sage-700 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
                  transition-colors duration-200
                `,children:i.label})},i.id))})}),e.jsx("div",{className:"space-y-6 sm:space-y-8",children:l.map((i,c)=>{const m=o(i.type);return e.jsxs(Se,{className:"relative",children:[c!==l.length-1&&e.jsx("div",{className:`absolute ${s?"left-4":"left-6"} top-12 sm:top-16 w-0.5 h-full bg-sage-200`}),e.jsxs("div",{className:"flex items-start space-x-3 sm:space-x-4",children:[e.jsx("div",{className:`flex-shrink-0 ${s?"w-8 h-8":"w-12 h-12"} bg-sage-700 rounded-full flex items-center justify-center`,children:e.jsx(m,{className:`${s?"w-4 h-4":"w-6 h-6"} text-white`})}),e.jsx(B,{className:"flex-1",children:e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:`flex ${s?"flex-col":"flex-row"}`,children:[i.thumbnail&&e.jsx("div",{className:`${s?"w-full h-48":"w-48 h-32"} flex-shrink-0`,children:e.jsx("img",{src:i.thumbnail,alt:i.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:`font-semibold text-gray-900 ${s?"text-base":"text-xl"}`,children:i.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(i.type)}`,children:i.type})]}),e.jsx("p",{className:`text-gray-600 mb-3 ${s?"text-sm":"text-base"}`,children:i.description}),e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-3",children:i.tags.map((x,p)=>e.jsx("span",{className:"px-2 py-1 bg-sage-100 text-sage-700 rounded-full text-xs",children:x},p))}),e.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{children:["Added by ",i.author]}),e.jsx("span",{children:i.date})]})]})]})})})]})]},i.id)})}),e.jsx("div",{className:"mt-8 sm:mt-12 text-center",children:e.jsx(B,{children:e.jsx("button",{className:"bg-sage-700 text-white px-6 py-3 rounded-lg font-medium hover:bg-sage-800 transition-colors",children:"Load More Memories"})})})]})}function Ut(){const{user:s,loading:t}=ce();return t?e.jsx("div",{className:"min-h-screen bg-sage-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sage-700 mx-auto mb-4"}),e.jsx("p",{className:"text-sage-600",children:"Loading MemoryMesh..."})]})}):e.jsx(qe,{children:e.jsxs(Je,{children:[e.jsx(C,{path:"/",element:e.jsx(At,{})}),e.jsx(C,{path:"/auth",element:s?e.jsx(L,{to:"/dashboard",replace:!0}):e.jsx(Dt,{})}),e.jsx(C,{path:"/dashboard",element:s?e.jsx(F,{children:e.jsx(_t,{})}):e.jsx(L,{to:"/auth",replace:!0})}),e.jsx(C,{path:"/timeline",element:s?e.jsx(F,{children:e.jsx(Ft,{})}):e.jsx(L,{to:"/auth",replace:!0})}),e.jsx(C,{path:"/upload",element:s?e.jsx(F,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Upload Memory"}),e.jsx("p",{className:"text-gray-600",children:"Coming soon..."})]})}):e.jsx(L,{to:"/auth",replace:!0})}),e.jsx(C,{path:"/family",element:s?e.jsx(F,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Family Members"}),e.jsx("p",{className:"text-gray-600",children:"Coming soon..."})]})}):e.jsx(L,{to:"/auth",replace:!0})}),e.jsx(C,{path:"/games",element:s?e.jsx(F,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Memory Games"}),e.jsx("p",{className:"text-gray-600",children:"Coming soon..."})]})}):e.jsx(L,{to:"/auth",replace:!0})}),e.jsx(C,{path:"/search",element:s?e.jsx(F,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Search Memories"}),e.jsx("p",{className:"text-gray-600",children:"Coming soon..."})]})}):e.jsx(L,{to:"/auth",replace:!0})}),e.jsx(C,{path:"/settings",element:s?e.jsx(F,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Coming soon..."})]})}):e.jsx(L,{to:"/auth",replace:!0})}),e.jsx(C,{path:"*",element:e.jsx(L,{to:"/",replace:!0})})]})})}const Rt=()=>h(void 0,null,function*(){J.isNativePlatform()&&(yield Ne.setStyle({style:ne.Dark}),yield Ne.setBackgroundColor({color:"#2d5738"}),yield St.hide())});Rt().then(()=>{Te(document.getElementById("root")).render(e.jsx(g.StrictMode,{children:e.jsx(Ut,{})}))});export{Ae as W};
